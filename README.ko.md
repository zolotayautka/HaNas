# HaNas

**한국어** | [日本語](./README.ja.md) | [English](./README.md)

웹 인터페이스를 갖춘 가볍고 독립적인 파일 관리 시스템입니다. 브라우저를 통해 파일을 업로드하고, 정리하고, 미디어를 스트리밍하세요.

## 기능

- 📁 **파일 관리**: 폴더 생성, 파일 업로드, 복사, 이동, 이름 변경 및 삭제
- 🎵 **미디어 재생**: 일반적인 형식의 오디오 및 비디오 플레이어 내장
- 🌍 **다국어 지원**: 일본어, 한국어, 영어 자동 감지 및 지원
- 📊 **업로드 진행률**: SSE를 통한 실시간 업로드 진행률 추적
- 🔄 **파일 덮어쓰기**: 재업로드 시 기존 파일 자동 업데이트
- 📦 **단일 바이너리**: 모든 자원이 내장되어 외부 종속성 불필요
- 🎨 **깔끔한 UI**: 간단하고 반응형 인터페이스

## 지원 미디어 형식

**오디오**: MP3, M4A, WAV, OGG, FLAC, AAC  
**비디오**: MP4, WebM, OGG, MOV, MKV

## 설치

### 필수 요구사항
- Go 1.16 이상

### 소스에서 빌드

```bash
git clone https://github.com/yourusername/HaNas.git
cd HaNas
go build
```

## 사용법

1. 서버 시작:
```bash
./hanas
```

2. 브라우저를 열고 다음으로 이동:
```
http://localhost:8080
```

3. 파일 업로드 및 정리를 시작하세요!

## 구성

- **포트**: 기본값은 `8080` (`main()` 함수에서 수정)
- **데이터 디렉토리**: `./data` (파일 저장 위치)
- **데이터베이스**: `./database.db` (SQLite 데이터베이스)

## API 엔드포인트

### 파일 작업
- `GET /node/:id` - 노드 정보 및 하위 항목 가져오기
- `GET /file/:id` - 파일 다운로드 또는 스트리밍
- `POST /upload` - 파일 업로드 또는 폴더 생성
- `POST /copy` - 파일/폴더 복사
- `POST /move` - 파일/폴더 이동
- `POST /rename` - 파일/폴더 이름 변경
- `POST /delete` - 파일/폴더 삭제

### 진행률 추적
- `GET /upload/progress?upload_id=<id>` - 업로드 진행률을 위한 SSE 엔드포인트

## 프로젝트 구조

```
HaNas/
├── app.go          # 메인 백엔드 로직
├── index.html      # 웹 인터페이스
├── index.js        # 프론트엔드 로직
├── i18n.js         # 국제화
├── client/         # 네이티브 클라이언트 애플리케이션
│   └── HaNas for Mac/  # macOS 네이티브 클라이언트
├── data/           # 파일 저장소 (자동 생성)
├── thumbnails/     # 썸네일 캐시
└── database.db     # SQLite 데이터베이스 (자동 생성)
```

## 기술 세부사항

### 백엔드
- **언어**: Go
- **데이터베이스**: GORM을 사용한 SQLite
- **기능**: 
  - Range 요청 지원 파일 스트리밍
  - 진행률 추적을 위한 Server-Sent Events
  - MIME 타입 감지
  - 계층적 폴더 구조

### 프론트엔드
- **바닐라 JavaScript**: 프레임워크 불필요
- **기능**:
  - 드래그 앤 드롭 지원 (파일 입력을 통해)
  - 실시간 업로드 진행률
  - 미디어 플레이어 통합
  - 반응형 디자인

## 언어 지원

인터페이스는 브라우저 언어를 자동으로 감지하고 다음 언어로 표시됩니다:
- 🇯🇵 일본어 (ja)
- 🇰🇷 한국어 (ko)
- 🇬🇧 영어 (en - 기본값)

## 개발

### 새 언어 추가

1. `i18n.js`를 편집하고 언어 코드를 추가하세요:
```javascript
const i18n = {
  // ... 기존 언어
  fr: {
    home: 'Accueil',
    // ... 모든 번역 추가
  }
};
```

2. `index.js`의 언어 감지를 업데이트하세요:
```javascript
if(userLang.startsWith('ja')) lang = 'ja';
else if(userLang.startsWith('ko')) lang = 'ko';
else if(userLang.startsWith('fr')) lang = 'fr'; // 이것을 추가
else lang = 'en';
```

### 지원 미디어 형식 수정

`index.js`의 `isMediaByName()` 함수를 편집하세요:
```javascript
const audio = ['mp3','m4a','wav','ogg','flac','aac','your-format'];
const video = ['mp4','webm','ogg','mov','mkv','your-format'];
```

## 보안 고려사항

⚠️ **이것은 개발/개인 사용 도구입니다**. 프로덕션 사용 시 다음을 고려하세요:
- 인증/권한 부여 추가
- 속도 제한 구현
- HTTPS 지원 추가
- 파일 이름 정제
- 파일 타입 제한
- 파일 크기 제한 추가

## 라이선스

MIT License

## 기여

기여를 환영합니다! Pull Request를 제출해 주세요.

## 로드맵

- [ ] 사용자 인증
- [ ] 링크를 통한 파일 공유
- [ ] 이미지/비디오 썸네일 생성
- [ ] 검색 기능
- [ ] 일괄 작업
- [ ] 폴더 Zip 다운로드
- [ ] 다크 모드

## 문제 해결

**문제**: 폴더와 같은 이름의 파일을 업로드할 수 없음  
**해결책**: 충돌 방지를 위한 설계입니다. 먼저 파일이나 폴더의 이름을 변경하세요.

**문제**: 미디어 파일이 재생되지 않음  
**해결책**: 파일 형식이 지원되는지 확인하세요. 컨테이너 형식이 나열되어 있더라도 브라우저가 모든 코덱을 지원하지 않을 수 있습니다.

**문제**: 업로드 진행률이 0%에서 멈춤  
**해결책**: 브라우저 콘솔에서 오류를 확인하세요. upload_id 매개변수가 올바르게 전달되고 있는지 확인하세요.

---

Go와 바닐라 JavaScript로 ❤️를 담아 제작
